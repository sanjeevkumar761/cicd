extends layout

block content

  // Everything in main panel
  +panel-primary(title + " - " + subtitle)
    //+table.table.table-striped.table-hover
    // update to compact table?
    table.table.table-striped
      thead
        // Header Row
        tr
          th Info
          th Name
          th State
          th.hidden-sm.hidden-xs GUID
          th.hidden-sm.hidden-xs Docker Image
          th Actions
      tbody 
        each app in apps

          //Row for each app
          tr
            td.clickable(data-toggle='collapse', data-target='#details-'+app.metadata.guid)
              +icon("info-sign")
            td
              b #{app.entity.name}
            td(class="app-"+app.entity.state) #{app.entity.state}
            td.hidden-sm.hidden-xs #{app.metadata.guid}
            td.hidden-sm.hidden-xs #{app.entity.docker_image}

            //Actions for each app
            td
              div.clickablebutton(onclick='appstart("'+app.metadata.guid+'");', data-toggle='collapse', data-target='#message-'+app.metadata.guid)
                +btn-success("Start")
              div.clickablebutton(onclick='appstop("'+app.metadata.guid+'");', data-toggle='collapse', data-target='#message-'+app.metadata.guid)
                +btn-warning("Stop")
              div.clickablebutton(onclick='appupdate("'+app.metadata.guid+'");', data-toggle='collapse', data-target='#message-'+app.metadata.guid)
                +btn-info("Update")
              div.clickablebutton(onclick='appdelete("'+app.metadata.guid+'");', data-toggle='collapse', data-target='#message-'+app.metadata.guid)
                +btn-danger("Delete")
         
          //Hidden row for showing app details
          tr(id="details-"+app.metadata.guid).collapse
            td(colspan='6')
              div.sub
                +panel-info(app.entity.name)
                  table.table.table-striped.table-dark
                   thead.thead-inverse
                    tr
                      th Property
                      th Details
                    each ent, key in app.entity
                      tr
                        td
                          b #{key}
                        td #{ent}

          //Hidden row for showing app action messages
          tr(id="message-"+app.metadata.guid).collapse
            td(colspan='6')
              div.sub(id="messagetext-"+app.metadata.guid)
                +alert-info("")
        
        //Row for adding new apps
        tr
          td(colspan="6")
            div.row
              div.col-md-2
                +icon("plus")
              div.col-md-5
                +input("text","txtAppName","App Name","App Name")
              div.col-md-5
                +input("text","txtImageName","App Docker Image","App Docker Image")
            div.row
              div.col-md-2
              div.col-md-10
                span.clickable(onclick='appadd(null, null)', data-toggle='collapse', data-target='#message-new')
                 +btn-success("Push App")

        //Hidden row for messages adding new apps
        tr(id="message-new").collapse
          td(colspan='6')
            div.sub(id="messagetext-new")
              +alert-info("")
  h1
   